C251 COMPILER V5.60.0,  main                                                               27/11/24  21:48:04  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE main
OBJECT MODULE PLACED IN .\list\main.obj
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE ..\User\main.c XSMALL INTR2 BROWSE INCDIR(..\Driver\inc;..\User;..\App
                    -\inc) DEBUG PRINT(.\list\main.lst) TABS(2) OBJECT(.\list\main.obj) 

stmt  level    source

    1          /*---------------------------------------------------------------------*/
    2          /* --- STC MCU Limited ------------------------------------------------*/
    3          /* --- STC 1T Series MCU Demo Programme -------------------------------*/
    4          /* --- Mobile: (86)13922805190 ----------------------------------------*/
    5          /* --- Fax: 86-0513-55012956,55012947,55012969 ------------------------*/
    6          /* --- Tel: 86-0513-55012928,55012929,55012966 ------------------------*/
    7          /* --- Web: www.STCMCU.com --------------------------------------------*/
    8          /* --- Web: www.STCMCUDATA.com  ---------------------------------------*/
    9          /* --- QQ:  800003751 -------------------------------------------------*/
   10          /* 如果要在程序中使用此代码,请在程序中注明使用了STC的资料及程序            */
   11          /*---------------------------------------------------------------------*/
   12          
   13          #include "config.h"
   14          #include "Task.h"
   15          #include "System_init.h"\
   16          #include "STC32G_GPIO.h"
   17          #include "STC32G_NVIC.h"
   18          #include "STC32G_I2C.h"
   19          #include "STC32G_DMA.h"
   20          
   21          // Define I2C Addresses
   22          #define MCU_EEPROM 0xAE
   23          #define CRPS_MCU 0xB0
   24          #define CRPS_EEPROM 0xA0
   25          #define OLED 0x78
   26          
   27          //========================================================================
   28          // Define: void start_gpio(void)
   29          // Desc: Init MCU GPIOs
   30          // Data: x
   31          // Return: x
   32          // Ver: V1.0
   33          //========================================================================
   34          void start_gpio(void)
   35          {
   36   1        P0_MODE_IO_PU(GPIO_Pin_0 | GPIO_Pin_1 | GPIO_Pin_2);
   37   1        P1_MODE_IO_PU(GPIO_Pin_0 | GPIO_Pin_1 | GPIO_Pin_4 | GPIO_Pin_5 | GPIO_Pin_6 | GPIO_Pin_7);
   38   1        P2_MODE_OUT_OD(GPIO_Pin_1);
   39   1        P3_MODE_IO_PU(GPIO_Pin_0 | GPIO_Pin_1 | GPIO_Pin_2);
   40   1        P4_MODE_OUT_PP(GPIO_Pin_7);
   41   1        P4_MODE_IO_PU(GPIO_Pin_4);
   42   1        P5_MODE_IO_PU(GPIO_Pin_4);
   43   1      }
   44          
   45          //========================================================================
   46          // Define: void start_i2c(void)
   47          // Desc: Init MCU master I2C
   48          // Data: x
   49          // Return: x
   50          // Ver: V1.0
   51          //========================================================================
   52          void start_i2c(void)
   53          {
   54   1        I2C_InitTypeDef I2C_InitStruct;
   55   1        I2C_InitStruct.I2C_Enable = ENABLE;
   56   1        I2C_InitStruct.I2C_Mode = I2C_Mode_Master;
   57   1        I2C_InitStruct.I2C_MS_WDTA = DISABLE;
   58   1        I2C_Init(&I2C_InitStruct);
C251 COMPILER V5.60.0,  main                                                               27/11/24  21:48:04  PAGE 2   

   59   1        NVIC_I2C_Init(I2C_Mode_Master, ENABLE, Priority_0);
   60   1      }
   61          
   62          //========================================================================
   63          // Define: void read_pmbus_eeprom(void)
   64          // Desc: Read CRPS EEPROM 
   65          // Data: 
   66          // Return: 
   67          // Ver: V1.0
   68          //========================================================================
   69          void read_pmbus_eeprom()
   70          {
   71   1        I2C_ReadNbyte(CRPS_EEPROM, )
*** ERROR C25 IN LINE 71 OF ..\User\main.c: syntax error near ')'
   72   1      }
   73   1      
   74   1      //========================================================================
   75   1      // 函数: void main(void)
   76   1      // 描述: 主函数程序.
   77   1      // 参数: None.
   78   1      // 返回: None.
   79   1      // 版本: V1.0, 2012-10-22
   80   1      //========================================================================
   81   1      void main(void)
   82   1      {
   83   2        WTST = 0;   //设置程序指令延时参数，赋值为0可将CPU执行指令的速度设置为最快
   84   2        EAXSFR();   //扩展SFR(XFR)访问使能 
   85   2        CKCON = 0;      //提高访问XRAM速度
   86   2      
   87   2        SYS_Init();
   88   2        
   89   2        start_gpio();
   90   2        start_i2c();
   91   2        EA = 1;
   92   2        
   93   2        
   94   2      }

C251 COMPILATION COMPLETE.  0 WARNING(S),  1 ERROR(S)
