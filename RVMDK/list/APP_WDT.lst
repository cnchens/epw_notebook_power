C251 COMPILER V5.60.0,  APP_WDT                                                            26/11/24  21:24:42  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE APP_WDT
OBJECT MODULE PLACED IN .\list\APP_WDT.obj
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE ..\App\src\APP_WDT.c XSMALL INTR2 BROWSE INCDIR(..\Driver\inc;..\User;
                    -..\App\inc) DEBUG PRINT(.\list\APP_WDT.lst) TABS(2) OBJECT(.\list\APP_WDT.obj) 

stmt  level    source

    1          /*---------------------------------------------------------------------*/
    2          /* --- STC MCU Limited ------------------------------------------------*/
    3          /* --- STC 1T Series MCU Demo Programme -------------------------------*/
    4          /* --- Mobile: (86)13922805190 ----------------------------------------*/
    5          /* --- Fax: 86-0513-55012956,55012947,55012969 ------------------------*/
    6          /* --- Tel: 86-0513-55012928,55012929,55012966 ------------------------*/
    7          /* --- Web: www.STCMCU.com --------------------------------------------*/
    8          /* --- Web: www.STCMCUDATA.com  ---------------------------------------*/
    9          /* --- QQ:  800003751 -------------------------------------------------*/
   10          /* 如果要在程序中使用此代码,请在程序中注明使用了STC的资料及程序            */
   11          /*---------------------------------------------------------------------*/
   12          
   13          #include  "APP.h"
   14          #include  "STC32G_WDT.h"
   15          #include  "STC32G_GPIO.h"
   16          #include  "STC32G_Delay.h"
   17          
   18          /*************   功能说明   ***************
   19          
   20          5秒后不喂狗, 等待看门狗复位.
   21          
   22          下载时, 选择时钟 24MHz (用户可在"config.h"修改频率).
   23          
   24          ******************************************/
   25          
   26          //========================================================================
   27          //                               本地常量声明 
   28          //========================================================================
   29          
   30          
   31          //========================================================================
   32          //                               本地变量声明
   33          //========================================================================
   34          
   35          
   36          //========================================================================
   37          //                               本地函数声明
   38          //========================================================================
   39          
   40          
   41          //========================================================================
   42          //                            外部函数和变量声明
   43          //========================================================================
   44          
   45          
   46          //========================================================================
   47          // 函数: WDT_init
   48          // 描述: 用户初始化程序.
   49          // 参数: None.
   50          // 返回: None.
   51          // 版本: V1.0, 2020-09-28
   52          //========================================================================
   53          void WDT_init(void)
   54          {
   55   1        WDT_InitTypeDef WDT_InitStructure;          //结构定义
   56   1      
   57   1        WDT_InitStructure.WDT_Enable     = ENABLE;          //中断使能   ENABLE或DISABLE
   58   1        WDT_InitStructure.WDT_IDLE_Mode  = WDT_IDLE_STOP;   //IDLE模式是否停止计数    WDT_IDLE_STOP,WDT_IDLE_RUN
C251 COMPILER V5.60.0,  APP_WDT                                                            26/11/24  21:24:42  PAGE 2   

   59   1        WDT_InitStructure.WDT_PS         = WDT_SCALE_256;   //看门狗定时器时钟分频系数    WDT_SCALE_2,WDT_SCALE_4,W
             -DT_SCALE_8,WDT_SCALE_16,WDT_SCALE_32,WDT_SCALE_64,WDT_SCALE_128,WDT_SCALE_256
   60   1        WDT_Inilize(&WDT_InitStructure);          //初始化
   61   1        
   62   1        RSTFLAG |= 0x04;   //设置看门狗复位需要检测P3.2的状态，否则看门狗复位后进入USB下载模式
   63   1      
   64   1        P4_MODE_IO_PU(GPIO_Pin_6);    //P4.6 设置为准双向口
   65   1      
   66   1        P46 = 0;
   67   1        delay_ms(100);
   68   1        P46 = 1;
   69   1        delay_ms(100);
   70   1        P46 = 0;
   71   1        delay_ms(100);
   72   1        P46 = 1;
   73   1        delay_ms(100);
   74   1        P46 = 0;
   75   1        delay_ms(100);
   76   1        P46 = 1;
   77   1        delay_ms(100);
   78   1        
   79   1        msecond = 0;
   80   1        second = 0;
   81   1      }
   82          
   83          //========================================================================
   84          // 函数: Sample_WDT
   85          // 描述: 用户应用程序.
   86          // 参数: None.
   87          // 返回: None.
   88          // 版本: V1.0, 2020-09-28
   89          //========================================================================
   90          void Sample_WDT(void)
   91          {
   92   1        if(second <= 5)   //5秒后不喂狗, 将复位,
   93   1          WDT_Clear();    // 喂狗
   94   1      
   95   1        if(++msecond >= 10)
   96   1        {
   97   2          msecond = 0;
   98   2          second++;
   99   2          P46 = !P46;
  100   2        }
  101   1      }
  102          


Module Information          Static   Overlayable
------------------------------------------------
  code size            =       165     ------
  ecode size           =    ------     ------
  data size            =    ------     ------
  idata size           =    ------     ------
  pdata size           =    ------     ------
  xdata size           =    ------     ------
  xdata-const size     =    ------     ------
  edata size           =    ------          3
  bit size             =    ------     ------
  ebit size            =    ------     ------
  bitaddressable size  =    ------     ------
  ebitaddressable size =    ------     ------
  far data size        =    ------     ------
  huge data size       =    ------     ------
  const size           =    ------     ------
  hconst size          =    ------     ------
End of Module Information.


C251 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
